#cloud-config
users:
  - default # This is the default ubuntu user
  - name: work
    shell: /bin/bash # The shell the user will log into
    groups: users,disk,dialout # dialout and disk give the work user access to storage and any connected serial devices. 
    plain_text_passwd: newpassword # this will be the password for the user you would login with ssh
    lock_passwd: false # unlock password to be able to lock into user via SSH
    sudo: ["ALL=(ALL) NOPASSWD:ALL"] # all unrestricted sudo access
    ssh_import_id:
      - gh:kevinlutzer # change this to be your Github user, it will add your public Github key so you can SSH into the Raspberry Pi with the same Github private key

ssh_pwauth: true # needed to remotely access the RPi with SSH by password, this is an sshd config

apt:
  sources:
    docker.list:
      source: deb [arch=amd64] https://download.docker.com/linux/ubuntu $RELEASE stable # Where apt can find docker
      keyid: 9DC858229FC7DD38854AE2D88D81803C0EBFCD88 # The ID of the GPG key docker uses

packages:
  - docker-ce
  - docker-ce-cli
  - build-essential # C toolchain
  - libssl-dev # dev package for Openssl development

write_files:
  - content: |
      #!/bin/bash
      echo "Hello World"
    owner: root:root
    permissions: '0755'
    path: /opt/hello_world

runcmd: 
  - ./opt/hello_world